const mongoose = require('mongoose');
const transcSchema = new mongoose.Schema({
    fromAccount:{
      type: mongoose.Schema.Types.ObjectId,
      ref:"account",
      required: [true, "Transaction must be aassociated with fom account"],
      index: true
    },
    toAccount:{
      type: mongoose.Schema.Types.ObjectId,
      ref:"account",
      required: [true, "Transaction must be aassociated with to account"],
      index: true
    },
    status:{
      type: String,
      enum:{
        values:["PENDING","COMPLETED","FAILED","REVERSED"]
      },default:"PENDING"
    },
    amount:{
      type:Number,
      required:[true,"Amount is required for creating a transacation"],
      min:[0,"Transaction amount cannot be negative"]
    },
    idempotencyKey:{
      type:String,
      required:[true, "Idempotency key is required for creating a transaction"],
      index: true,
      unique: true
    }
},{
  timestamps:true
});

const transactionModel = mongoose.model("transaction",transcSchema)

module.exports= transactionModel;
